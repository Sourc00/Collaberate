{% extends "base.html" %}

{% block title %}{{ resource.title }} - Collaberate{% endblock %}

{% block content %}
<h1>{{ resource.title }}</h1>

<div class="resource-details">
    <p><strong>Description:</strong> {{ resource.description }}</p>
    <p><strong>Type:</strong> {{ resource.resource_type }}</p>
    <p><strong>Created by:</strong> {{ resource.creator.username }}</p>
    <p><strong>Created at:</strong> {{ resource.created_at.strftime('%B %d, %Y') }}</p>
    <p><strong>Last updated:</strong> {{ resource.updated_at.strftime('%B %d, %Y') }}</p>
    
    <a href="{{ url_for('download_resource', resource_id=resource.id) }}" class="btn">Download Resource</a>
</div>

{% if current_user.id == resource.created_by %}
    <h2>Edit Resource</h2>
    <form method="POST" action="{{ url_for('resource_details', resource_id=resource.id) }}?_method=PUT" enctype="multipart/form-data">
        <div>
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" value="{{ resource.title }}" required>
        </div>
        <div>
            <label for="description">Description:</label>
            <textarea id="description" name="description" required>{{ resource.description }}</textarea>
        </div>
        <div>
            <label for="resource_type">Resource Type:</label>
            <select id="resource_type" name="resource_type" required>
                <option value="template" {% if resource.resource_type == 'template' %}selected{% endif %}>Template</option>
                <option value="tool" {% if resource.resource_type == 'tool' %}selected{% endif %}>Tool</option>
                <option value="guide" {% if resource.resource_type == 'guide' %}selected{% endif %}>Guide</option>
            </select>
        </div>
        <div>
            <label for="file">File (leave empty to keep current file):</label>
            <input type="file" id="file" name="file">
        </div>
        <button type="submit">Update Resource</button>
    </form>

    <h2>Delete Resource</h2>
    <form method="POST" action="{{ url_for('resource_details', resource_id=resource.id) }}?_method=DELETE">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this resource?')">Delete Resource</button>
    </form>
{% endif %}
{% endblock %}